var UILibrary=function(){"use strict";function t(t,e){const o=function(t){const e=document.createElement("template");return e.innerHTML=t.trim(),e.content.cloneNode(!0)}(t);return e.appendChild(o),o}function e(t,e,o=[]){try{if(!("CSSStyleSheet"in window)||!("replaceSync"in CSSStyleSheet.prototype))return!1;const s=new CSSStyleSheet;return s.replaceSync(e),o.length>0?t.adoptedStyleSheets=[...o,s]:t.adoptedStyleSheets=[s],!0}catch(t){return console.error("Error applying styles with Constructable Stylesheets:",t),!1}}class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),e(this.shadowRoot,":host{--toast-success-color:var(--pico-color-success,#43a047);--toast-error-color:var(--pico-color-error,#d32f2f);--toast-info-color:var(--pico-primary,#1976d2);--toast-warning-color:var(--pico-color-warning,#f57c00);--toast-text-color:var(--pico-color-text-inverse,white);--toast-shadow:var(--pico-card-shadow,0 3px 10px rgba(0,0,0,0.2));--toast-border-radius:var(--pico-border-radius,4px);--toast-font-family:var(--pico-font-family,sans-serif);--toast-font-size:var(--pico-font-size,16px);position:fixed;bottom:20px;right:20px;z-index:1000;visibility:hidden;min-width:250px;max-width:320px;padding:var(--pico-spacing,12px 16px);border-radius:var(--toast-border-radius);font-family:var(--toast-font-family);font-size:var(--toast-font-size);box-shadow:var(--toast-shadow);transition:transform 0.2s ease-out,opacity 0.2s ease-out;transform:translateY(30px);opacity:0;}:host(.visible){visibility:visible;transform:translateY(0);opacity:1;}:host(.success){background-color:var(--toast-success-color);color:var(--toast-text-color);}:host(.error){background-color:var(--toast-error-color);color:var(--toast-text-color);}:host(.info){background-color:var(--toast-info-color);color:var(--toast-text-color);}:host(.warning){background-color:var(--toast-warning-color);color:var(--toast-text-color);}.content{display:flex;align-items:center;gap:8px;}.message{flex-grow:1;}button{--pico-button-padding:0;background:transparent;border:none;color:inherit;cursor:pointer;margin-left:auto;opacity:0.7;transition:opacity 0.2s;display:flex;align-items:center;justify-content:center;padding:0;}button:hover{opacity:1;}svg{width:20px;height:20px;fill:currentColor;}@media (max-width:600px){.toast{min-width:auto;max-width:none;width:calc(100vw - 40px);}}",document.adoptedStyleSheets),t('<div class="toast"><div class="toast-icon"><svg class="icon-success" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg> <svg class="icon-error" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg> <svg class="icon-info" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg> <svg class="icon-warning" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg></div><span class="message"></span> <button class="close-btn" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></div>',this.shadowRoot),this._duration=3e3,this._autoHide=!0,this._timerId=null,this._type="info",this.messageElement=this.shadowRoot.querySelector(".message"),this.closeButton=this.shadowRoot.querySelector(".close-btn"),this.closeButton.addEventListener("click",(()=>this.hide()))}static get observedAttributes(){return["type","message","duration","auto-hide"]}connectedCallback(){this.hasAttribute("message")&&(this.messageElement.textContent=this.getAttribute("message")),this.hasAttribute("type")?this.type=this.getAttribute("type"):this.classList.add(this._type),this.hasAttribute("duration")&&(this._duration=parseInt(this.getAttribute("duration"),10)),this.hasAttribute("auto-hide")&&(this._autoHide="false"!==this.getAttribute("auto-hide"))}attributeChangedCallback(t,e,o){"message"===t&&this.messageElement?this.messageElement.textContent=o:"type"===t&&o?this.type=o:"duration"===t&&o?this._duration=parseInt(o,10):"auto-hide"===t&&(this._autoHide="false"!==o)}get type(){return this._type}set type(t){this._type&&this.classList.remove(this._type),this._type=t,this.classList.add(t)}get message(){return this.messageElement?this.messageElement.textContent:""}set message(t){this.messageElement&&(this.messageElement.textContent=t)}get duration(){return this._duration}set duration(t){this._duration=t}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=t}show(){return this._timerId&&(clearTimeout(this._timerId),this._timerId=null),this.classList.add("visible"),this._autoHide&&(this._timerId=setTimeout((()=>{this.hide()}),this._duration)),this}hide(){return this.classList.remove("visible"),this._timerId&&(clearTimeout(this._timerId),this._timerId=null),this.dispatchEvent(new CustomEvent("toast-hidden")),this}}function s(t={}){const{message:e="",type:o="info",duration:s=3e3,autoHide:r=!0}=t,n=document.createElement("toast-element");return n.message=e,n.type=o,n.duration=s,n.autoHide=r,document.body.appendChild(n),n.show(),n.addEventListener("toast-hidden",(()=>{setTimeout((()=>{document.body.contains(n)&&document.body.removeChild(n)}),200)})),n}"undefined"!=typeof module&&module.exports&&(module.exports={ToastElement:o,showToast:s}),"undefined"!=typeof window&&(window.ToastElement=o,window.showToast=s);class r extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),e(this.shadowRoot,'.toggle{background:var(--surface);border:1px solid var(--border);padding:0.5rem 1rem;border-radius:0.5rem;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;}.dark{display:none;}:host-context([data-theme="dark"]) .light{display:none;}:host-context([data-theme="dark"]) .dark{display:inline;}',document.adoptedStyleSheets),t('<button class="toggle"><lucide-icon name="sun" variant="primary" class="light"></lucide-icon><lucide-icon name="moon" variant="primary" class="dark"></lucide-icon></button>',this.shadowRoot),this.initializeTheme()}initializeTheme(){const t=localStorage.getItem("theme");if(t)document.documentElement.setAttribute("data-theme",t);else{const t=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",t?"dark":"light"),localStorage.setItem("theme",t?"dark":"light")}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(t=>{if(!localStorage.getItem("theme")){const e=t.matches?"dark":"light";document.documentElement.setAttribute("data-theme",e)}}))}setupListeners(){this.shadowRoot.querySelector(".toggle").addEventListener("click",(()=>{const t="dark"===document.documentElement.getAttribute("data-theme");document.documentElement.setAttribute("data-theme",t?"light":"dark"),localStorage.setItem("theme",t?"light":"dark")}))}connectedCallback(){this.setupListeners()}}class n{static handleErrors(t){t&&t.errors?(n.clearErrors(),Object.keys(t.errors).forEach((e=>{t.errors[e].forEach((t=>{if(!t.field||!t.message)return void console.warn("Invalid error format:",t);const o=t.field,s=document.querySelector(`[name="${o}"]`);if(!s){console.warn(`Input element with name "${t.field}" not found. Adding error to form.`);const o=document.querySelector(`form[name="${e}"], form#${e}, form[data-form-id="${e}"]`);if(!o){const o=document.getElementById(e);return o?void n.addError(o,t.message):void console.error(`Neither form nor container for "${e}" found`)}return void n.addError(o,t.message)}const r=s.parentElement;if(!r)return console.warn(`Parent element for input "${t.field}" not found. Adding error directly.`),void n.addError(s,t.message);n.addError(r,t.message)}))}))):console.error("Invalid error response format")}static addError(t,e){const o="INPUT"===t.tagName?t:t.querySelector("input, select, textarea");if(o){o.setAttribute("aria-invalid","true");const t=`${o.name}-helper`;o.setAttribute("aria-describedby",t);let s=document.getElementById(t);s||(s=document.createElement("small"),s.id=t,o.nextElementSibling?o.parentNode.insertBefore(s,o.nextElementSibling):o.parentNode.appendChild(s)),s.dataset.originalText||(s.dataset.originalText=s.textContent),s.textContent=e}else{const o=document.createElement("p");o.className="error-message",o.setAttribute("role","alert"),o.textContent=e,t.prepend(o)}}static clearErrors(){document.querySelectorAll('[aria-invalid="true"]').forEach((t=>{t.removeAttribute("aria-invalid");const e=t.getAttribute("aria-describedby");if(e){const t=document.getElementById(e);t&&t.dataset.originalText&&(t.textContent=t.dataset.originalText,delete t.dataset.originalText)}})),document.querySelectorAll(".error-message").forEach((t=>{t.remove()}))}}class a{static handleResponse(t,e=4e3){return t.errors&&t.errors.length>0?t.errors.forEach((t=>{a.create("error",t.message||"An error occurred",e)})):t.extensions&&t.extensions.successMessage&&a.create("success",t.extensions.successMessage,e),t.data}static create(t,e,o=4e3){const s=document.createElement("graphql-toast");return s.setAttribute("type",t),s.setAttribute("message",e),s.setAttribute("duration",o.toString()),document.body.appendChild(s),s}static registerHtmxExtension(){"undefined"!=typeof htmx?htmx.defineExtension("graphql-toast",{onEvent:function(t,e){if("htmx:configRequest"===t){e.detail.headers.Accept="application/json";const t=new URLSearchParams(document.location.search);for(const[o,s]of t.entries())e.detail.parameters[o]=s}if("htmx:beforeRequest"===t&&n.clearErrors(),"htmx:beforeSwap"===t){const t=e.detail.xhr;if(t.getResponseHeader("Content-Type")?.includes("application/json"))try{const o=JSON.parse(t.responseText);if(o&&(void 0!==o.data||o.errors)){if(a.handleResponse(o),o.extensions&&o.extensions.html)e.detail.serverResponse=o.extensions.html;else if(!o.data&&o.errors)return e.detail.shouldSwap=!1,!0;o.extensions&&o.extensions.errors&&n.handleErrors(o.extensions)}}catch(t){console.error("Error processing JSON response:",t)}}}}):console.warn("HTMX not found, GraphQL extension not loaded")}}async function i(){document.body.style.opacity=0;try{const t=await fetch("https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"),e=await t.text(),s=new CSSStyleSheet;s.replaceSync(e),document.adoptedStyleSheets=[s];const n=new CSSStyleSheet;return n.replaceSync("\n      :root {\n        --toast-border-radius: 8px;\n        /* More custom variables... */\n      }\n    "),document.adoptedStyleSheets=[s,n],customElements.get("toast-element")||customElements.define("toast-element",o),customElements.get("theme-toggle")||customElements.define("theme-toggle",r),window.htmx&&a.registerHtmxExtension(),document.body.style.opacity=1,!0}catch(t){return console.error("UI Library initialization failed:",t),document.body.style.opacity=1,!1}}const d={initialize:i,ToastElement:o,ThemeToggle:r,GraphQLToastHandler:a,FormErrorHandler:n};return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i(),window.UILibrary=d,d}();
//# sourceMappingURL=ui-library.min.js.map
